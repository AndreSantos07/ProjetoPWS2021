<?php
use ArmoredCore\Controllers\BaseController;
use ArmoredCore\WebObjects\Redirect;
use ArmoredCore\WebObjects\Session;
use ArmoredCore\WebObjects\View;
use Carbon\Carbon;
use ArmoredCore\WebObjects\Debug;
use ArmoredCore\Interfaces\ResourceControllerInterface;
use ArmoredCore\WebObjects\Post;




/**
 * Created by PhpStorm.
 * User: smendes
 * Date: 09-05-2016
 * Time: 11:30
 */
class PassageiroController extends BaseController
{

    public function passageiro(){
        return View::make('passageiro.PassageiroIndex');
    }

    public function Registo(){
        return View::make('passageiro.PassageiroRegisto');
    }

    public function GuardarRegisto(){
        $utilizador = new User(Post::getAll());

        $utilizador->save();
        Redirect::toRoute('home/login');
    }

        public function AlterarRegisto(){
            $utilizador = User::find($_SESSION['user_id']);

            if (is_null($utilizador)) {
                //TODO redirect to standard error page
            } else {
                return View::make('passageiro.PassageiroAlterarRegisto', ['utilizador' => $utilizador]);
            }
        }

    public function GuardarAlterarRegisto($idutilizador){
        $utilizador = User::find([$idutilizador]);
        $utilizador->update_attributes(Post::getAll());

        $utilizador->save();
        Redirect::toRoute('passageiro/PassageiroIndex');
    }


}
